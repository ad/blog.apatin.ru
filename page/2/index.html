<!doctype html><html lang=ru class=no-js lang><head><meta charset=utf-8><title>Weblog — Личный блог с мыслями и наблюдениями</title><meta name=og:title content="Weblog — Личный блог с мыслями и наблюдениями"><meta name=description content="The uWSGI Spooler. Установка и настройка PostgresQL. nginx for frontenders. Настройка Monit для поддержания жизни nginx/postgresql. Let’s Encrypt SSL …"><meta name=og:description content="The uWSGI Spooler. Установка и настройка PostgresQL. nginx for frontenders. Настройка Monit для поддержания жизни nginx/postgresql. Let’s Encrypt SSL …"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5"><meta property="og:image" content="/static/apple-touch-icon.png"><link rel="shortcut icon" href=https://blog.apatin.ru/static/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=https://blog.apatin.ru/static/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://blog.apatin.ru/static/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://blog.apatin.ru/static/favicon-16x16.png><link rel=icon href=https://blog.apatin.ru/static/favicon.svg type=image/svg+xml><link rel=stylesheet href=https://blog.apatin.ru/css/main.min.d7c3c7e9e654172b8af1a12daeb567f298704e6e807ef11db8212f23c4a6be36.css integrity="sha256-18PH6eZUFyuK8aEtrrVn8phwTm6AfvEduCEvI8SmvjY=" media=screen><link href=https://blog.apatin.ru/rss.xml rel=alternate type=application/rss+xml title=Weblog><link href=https://blog.apatin.ru/rss.xml rel=feed type=application/rss+xml title=Weblog><meta name=yandex-verification content="975872b19b152cad"><meta name=yandex-verification content="449579cc5ed55017"></head><body><div class=common><div class=flag><div class=header-content><div class=header-description><div class=title><div class=title-inner><div class=logo-marginal><div class=e2-user-picture-container><img alt=Logo title=Logo src=https://blog.apatin.ru/static/favicon.png></div></div><h1><a href=https://blog.apatin.ru/><span id=e2-blog-title style=font-size:48px>Weblog</span></a></h1></div><div id=e2-blog-description><p>Личный блог с мыслями и наблюдениями</p></div></div></div><div class=spotlight><form id=e2-search class="search-field search-field-right-anchored e2-enterable" action=https://blog.apatin.ru/search accept-charset=utf-8 name=searchForm role=form onsubmit=return!1><label class=search-field__label><input class=search-field__input type=text autocomplete=off placeholder="Search site" id=search aria-label="Search site" name=q><div class=search-field__zoom-icon><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 16 16"><path stroke="none" fill-rule="evenodd" clip-rule="evenodd" d="M16 14.5l-4.399-4.399a6.212 6.212.0 001.148-3.602 6.25 6.25.0 10-12.5.0 6.25 6.25.0 006.251 6.25 6.212 6.212.0 003.602-1.148L14.5 16l1.5-1.5zM1.25 6.501a5.251 5.251.0 1110.502.0 5.251 5.251.0 01-10.502.0z"/></svg></div><a class="nu search-field__tags-icon" href=https://blog.apatin.ru/tags/ title=Теги><span class=e2-svgi><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 16 16"><path stroke="none" d="M6.938 16.001c-.43.0-.891-.16-1.32-.59L.607 10.38C-.406 9.367.037 8.191.581 7.647l6.538-6.501C7.145 1.116 8.176.0 9.427.0h4.044c1.153.0 2.5.659 2.5 2.516v3.991c0 1.167-1.029 2.229-1.146 2.347L8.32 15.415c-.308.309-.818.586-1.382.586zM9.427 1c-.801.0-1.578.828-1.586.837L1.287 8.354c-.146.152-.587.706.027 1.319l5.011 5.031c.589.59 1.137.15 1.29.003l6.501-6.559c.238-.241.855-1.002.855-1.642v-3.99c0-1.318-.94-1.516-1.5-1.516H9.427zm1.571 5.754c-.468.0-.907-.183-1.238-.515a1.765 1.765.0 010-2.487c.661-.664 1.814-.664 2.475.0.331.332.513.774.513 1.243s-.182.911-.513 1.243a1.73 1.73.0 01-1.237.516z"/></svg></span></a></label></form></div></div></div><section class=search-results style=display:none><div class=content></div></section><div class=content id=content><div id=e2-note-6 class=e2-note><article><a href=https://blog.apatin.ru/p/uwsgi-spooler/><h2 class="e2-published e2-smart-title" style=font-size:24px>The uWSGI Spooler</h2></a><div class=e2-note-tags><span class=e2-timestamp>13.04.2017</span> &nbsp;
<a href=https://blog.apatin.ru/t/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5 class=e2-tag>техническое</a> &nbsp;
<a href=https://blog.apatin.ru/t/%D0%BA%D0%BE%D0%B4 class=e2-tag>код</a> &nbsp;
<a href=https://blog.apatin.ru/t/uwsgi class=e2-tag>uwsgi</a> &nbsp;
<a href=https://blog.apatin.ru/t/spooler class=e2-tag>spooler</a> &nbsp;
<span class=e2-timestamp>3 мин.</span></div><br><div class="e2-note-text e2-text e2-published"><p>Когда проектируешь масштабируемые системы, где приходится обращаться ко множеству внешних компонент, например, использование стороннего API, отправка почты или конвертация видео, лучшим способом реализации является асинхронная модель с системой очередей, которая является связующим звеном для взаимодействия всех компонент системы…</p><p>Самой популярной системой очередей в Python является Celery, она обладает широким набором возможностей по управлению задачами.</p><p>К сожалению, сложные системы на базе Celery сложно поддерживать в работоспособном состоянии и когда что-то идёт не так, то найти проблему бывает весьма не просто. Можете спросить любого девопса об опыте работы с Celery, но будьте готовы услышать не очень приятные слова.</p><p>К счастью, есть альтернативное решение и сейчас я расскажу о нём.</p><p class=foot><a href=https://blog.apatin.ru/p/uwsgi-spooler/>Читать далее &rarr;</a></p></div></article></div><br><div id=e2-note-6 class=e2-note><article><a href=https://blog.apatin.ru/p/postgres_install/><h2 class="e2-published e2-smart-title" style=font-size:24px>Установка и настройка PostgresQL</h2></a><div class=e2-note-tags><span class=e2-timestamp>12.12.2016</span> &nbsp;
<a href=https://blog.apatin.ru/t/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5 class=e2-tag>техническое</a> &nbsp;
<a href=https://blog.apatin.ru/t/postgres class=e2-tag>postgres</a> &nbsp;
<a href=https://blog.apatin.ru/t/ubuntu class=e2-tag>ubuntu</a> &nbsp;
<a href=https://blog.apatin.ru/t/debian class=e2-tag>debian</a> &nbsp;
<span class=e2-timestamp>1 мин.</span></div><br><div class="e2-note-text e2-text e2-published"><h2 id=установка>Установка</h2><pre><code>apt-get update
apt-get upgrade
apt-get install postgresql
</code></pre><p class=foot><a href=https://blog.apatin.ru/p/postgres_install/>Читать далее &rarr;</a></p></div></article></div><br><div id=e2-note-6 class=e2-note><article><a href=https://blog.apatin.ru/p/nginx_for_frontenders/><h2 class="e2-published e2-smart-title" style=font-size:24px>nginx for frontenders</h2></a><div class=e2-note-tags><span class=e2-timestamp>26.04.2016</span> &nbsp;
<a href=https://blog.apatin.ru/t/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5 class=e2-tag>техническое</a> &nbsp;
<a href=https://blog.apatin.ru/t/%D0%BA%D0%BE%D0%B4 class=e2-tag>код</a> &nbsp;
<a href=https://blog.apatin.ru/t/nginx class=e2-tag>nginx</a> &nbsp;
<a href=https://blog.apatin.ru/t/frontend class=e2-tag>frontend</a> &nbsp;
<span class=e2-timestamp>3 мин.</span></div><br><div class="e2-note-text e2-text e2-published"><p>Очень часто бывает, что фронтенд-разработчику необходимо добавить или изменить функционал сайта, но нет возможности получить его dev-версию, на которую можно повлиять. Обычно это пытаются обойти запуском браузера с отключенной безопасностью, но не всегда это помогает.</p><p>Я расскажу как при работе с «чёрным ящиком» иметь возможность воздействать на его ответы, а также как решать проблемы связанные с безопасностью.</p><p class=foot><a href=https://blog.apatin.ru/p/nginx_for_frontenders/>Читать далее &rarr;</a></p></div></article></div><br><div id=e2-note-6 class=e2-note><article><a href=https://blog.apatin.ru/p/monit/><h2 class="e2-published e2-smart-title" style=font-size:24px>Настройка Monit для поддержания жизни nginx/postgresql</h2></a><div class=e2-note-tags><span class=e2-timestamp>29.12.2015</span> &nbsp;
<a href=https://blog.apatin.ru/t/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5 class=e2-tag>техническое</a> &nbsp;
<a href=https://blog.apatin.ru/t/postgres class=e2-tag>postgres</a> &nbsp;
<a href=https://blog.apatin.ru/t/nginx class=e2-tag>nginx</a> &nbsp;
<a href=https://blog.apatin.ru/t/monit class=e2-tag>monit</a> &nbsp;
<span class=e2-timestamp>1 мин.</span></div><br><div class="e2-note-text e2-text e2-published"><h2 id=установка>Установка</h2><pre><code>apt-get install monit
</code></pre><p class=foot><a href=https://blog.apatin.ru/p/monit/>Читать далее &rarr;</a></p></div></article></div><br><div id=e2-note-6 class=e2-note><article><a href=https://blog.apatin.ru/p/letsencrypt_nginx/><h2 class="e2-published e2-smart-title" style=font-size:24px>Let’s Encrypt SSL Certificates и Nginx</h2></a><div class=e2-note-tags><span class=e2-timestamp>17.11.2015</span> &nbsp;
<a href=https://blog.apatin.ru/t/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5 class=e2-tag>техническое</a> &nbsp;
<a href=https://blog.apatin.ru/t/letsencrypt class=e2-tag>letsencrypt</a> &nbsp;
<a href=https://blog.apatin.ru/t/nginx class=e2-tag>nginx</a> &nbsp;
<span class=e2-timestamp>1 мин.</span></div><br><div class="e2-note-text e2-text e2-published"><h2 id=первым-делом-скачиваем-актуальную-версию>Первым делом скачиваем актуальную версию</h2><pre><code>sudo apt-get update

sudo apt-get install git

git clone https://github.com/letsencrypt/letsencrypt
</code></pre><p class=foot><a href=https://blog.apatin.ru/p/letsencrypt_nginx/>Читать далее &rarr;</a></p></div></article></div><br><div id=e2-note-6 class=e2-note><article><a href=https://blog.apatin.ru/p/postgresql_reload/><h2 class="e2-published e2-smart-title" style=font-size:24px>Postgresql reload</h2></a><div class=e2-note-tags><span class=e2-timestamp>25.09.2015</span> &nbsp;
<a href=https://blog.apatin.ru/t/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5 class=e2-tag>техническое</a> &nbsp;
<a href=https://blog.apatin.ru/t/postgres class=e2-tag>postgres</a> &nbsp;
<span class=e2-timestamp>1 мин.</span></div><br><div class="e2-note-text e2-text e2-published"><p>Часто бывает, что после того как внесешь изменения в pg_hba.conf нужно сделать рестарт, чтобы изменения вступили в силу. Оказывается, можно не делать, а выполнить:</p><pre><code># pg_ctl reload
</code></pre><p>или</p><pre><code>SELECT pg_reload_conf();
</code></pre></div></article></div><br><div id=e2-note-6 class=e2-note><article><a href=https://blog.apatin.ru/p/postgres_logging_trigger/><h2 class="e2-published e2-smart-title" style=font-size:24px>Логирование изменений в Postgresql</h2></a><div class=e2-note-tags><span class=e2-timestamp>26.05.2015</span> &nbsp;
<a href=https://blog.apatin.ru/t/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5 class=e2-tag>техническое</a> &nbsp;
<a href=https://blog.apatin.ru/t/%D0%BA%D0%BE%D0%B4 class=e2-tag>код</a> &nbsp;
<a href=https://blog.apatin.ru/t/%D0%BF%D0%BE%D0%BB%D0%B5%D0%B7%D0%BD%D0%BE%D0%B5 class=e2-tag>полезное</a> &nbsp;
<a href=https://blog.apatin.ru/t/postgres class=e2-tag>postgres</a> &nbsp;
<a href=https://blog.apatin.ru/t/logging class=e2-tag>logging</a> &nbsp;
<a href=https://blog.apatin.ru/t/trigger class=e2-tag>trigger</a> &nbsp;
<span class=e2-timestamp>1 мин.</span></div><br><div class="e2-note-text e2-text e2-published"><p>Иногда нужно добавить логирование изменений в некоторых таблицах, для этого приходится городить сложную систему, которая будет отслеживать изменения и записывать в нужное место что поменялось, и есть большой риск забыть добавить логирование в каком-то месте, эту проблему можно изящно решить сделав триггер на изменение таблицы (весь исходный код доступен на
<a href=https://gist.github.com/ad/24b606793aa73e8fd5bf1fe4a89c9507 target=_blank rel="external nofollow noreferrer">github</a> или можно скопировать нажав на кнопку).</p><p class=foot><a href=https://blog.apatin.ru/p/postgres_logging_trigger/>Читать далее &rarr;</a></p></div></article></div><br><div id=e2-note-6 class=e2-note><article><a href=https://blog.apatin.ru/p/postgres_update_trigger/><h2 class="e2-published e2-smart-title" style=font-size:24px>Автоматическое обновление поля в PostgreSQL</h2></a><div class=e2-note-tags><span class=e2-timestamp>25.05.2015</span> &nbsp;
<a href=https://blog.apatin.ru/t/%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5 class=e2-tag>техническое</a> &nbsp;
<a href=https://blog.apatin.ru/t/%D0%BA%D0%BE%D0%B4 class=e2-tag>код</a> &nbsp;
<a href=https://blog.apatin.ru/t/%D0%BF%D0%BE%D0%BB%D0%B5%D0%B7%D0%BD%D0%BE%D0%B5 class=e2-tag>полезное</a> &nbsp;
<a href=https://blog.apatin.ru/t/postgres class=e2-tag>postgres</a> &nbsp;
<span class=e2-timestamp>1 мин.</span></div><br><div class="e2-note-text e2-text e2-published"><p>В Postgres можно сделать, чтобы при создании записи какому-то параметру автоматически присваивалось значение:</p><pre><code>ALTER TABLE table_name ADD COLUMN &quot;updated&quot; timestamp NULL DEFAULT now();
</code></pre><p class=foot><a href=https://blog.apatin.ru/p/postgres_update_trigger/>Читать далее &rarr;</a></p></div></article></div><br><div id=e2-note-6 class=e2-note><article><a href=https://blog.apatin.ru/p/osx_autorotate_and_resize/><h2 class="e2-published e2-smart-title" style=font-size:24px>OS X: поворот и ресайз фотографий</h2></a><div class=e2-note-tags><span class=e2-timestamp>26.06.2014</span> &nbsp;
<a href=https://blog.apatin.ru/t/photos class=e2-tag>photos</a> &nbsp;
<a href=https://blog.apatin.ru/t/resize class=e2-tag>resize</a> &nbsp;
<a href=https://blog.apatin.ru/t/os-x class=e2-tag>OS X</a> &nbsp;
<span class=e2-timestamp>1 мин.</span></div><br><div class="e2-note-text e2-text e2-published"><p>Хотелось бы рассказать про две программки, которые сильно упрощают жизнь, когда имеется много фотографий, которые нужно повернуть и изменить размер: jhead и sips</p><p>sips — стандартная утилита OS X, scriptable image processing system. Кроме прочего, умеет изменять размер картинки по максимальной стороне.</p><p><a href=http://www.sentex.net/~mwandel/jhead/ target=_blank rel="external nofollow noreferrer">jhead</a> — Exif Jpeg header manipulation tool. Удобна для поворота картинки по данным EXIF. Для её работы нужен libjpeg (brew install libjpeg).</p><pre><code>$ mkdir 1024 # создаем папку для готовых картинок
</code></pre><pre><code>$ jhead -autorot source_images/* # поворачиваем картинки
</code></pre><pre><code>$ sips -Z 1024 source_images/* --out 1024/ # изменяем размер
</code></pre></div></article></div><br><div id=e2-note-6 class=e2-note><article><a href=https://blog.apatin.ru/p/icloud_lost_notes/><h2 class="e2-published e2-smart-title" style=font-size:24px>Восстановление "пропавших" заметок iCloud</h2></a><div class=e2-note-tags><span class=e2-timestamp>18.05.2014</span> &nbsp;
<a href=https://blog.apatin.ru/t/apple class=e2-tag>apple</a> &nbsp;
<a href=https://blog.apatin.ru/t/icloud class=e2-tag>icloud</a> &nbsp;
<span class=e2-timestamp>1 мин.</span></div><br><div class="e2-note-text e2-text e2-published"><p>Может быть я один такой, но похожие жалобы слышал от знакомых.</p><p>Суть в том, что когда пользуешься 2 и более устройствами на iOS и делаешь заметки на обоих, то в какой-то момент замечаешь, что заметка (приложение Notes или Заметки) пропала&mldr; Или, она есть на одном устройстве, но её нет на другом. В то же время эта заметка может быть на одном из устройств и отсутствовать на
<a href=https://icloud.com target=_blank rel="external nofollow noreferrer">icloud.com</a> или наоборот. Ясно что имеется какая-то проблема с синхронизацией.</p><p class=foot><a href=https://blog.apatin.ru/p/icloud_lost_notes/>Читать далее &rarr;</a></p></div></article></div><br><div class=e2-pages><a href=https://blog.apatin.ru/ id=link-earlier>Ранее</a>
<span class=e2-keyboard-shortcut>↓</span><span class=e2-keyboard-shortcut>⌥</span><span class=e2-keyboard-shortcut>↑</span>
<a href=https://blog.apatin.ru/page/3/ id=link-later>Позднее</a></div></div><div class=footer>&copy;
<span id=e2-blog-author>Daniel Apatin</span>,
2008—2024
<a href=https://blog.apatin.ru/rss.xml type=application/rss+xml target=_blank class=e2-rss-button>RSS</a>
<a class=e2-rss-button href=https://blog.apatin.ru/tags/>Теги</a></div></div><noscript><div><img src=https://mc.yandex.ru/watch/21943429 style=position:absolute;left:-9999px alt></div></noscript><script type=text/javascript src=https://blog.apatin.ru/js/common.min.js></script><script type=text/javascript>let searchFired=!1;var searchEl=document.getElementsByClassName("search-field__zoom-icon")[0];searchEl.addEventListener('click',function(){searchFired===!1&&(searchFired=!0,setTimeout(()=>{var a=document.createElement('script');a.type='text/javascript',a.src='https://blog.apatin.ru/js/search.min.js',document.getElementsByTagName('body')[0].appendChild(a)},500))},{passive:!0})</script></body><ok></html>