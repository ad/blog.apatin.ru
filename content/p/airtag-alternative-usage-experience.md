+++
title = "Airtag — опыт использования альтернативной прошивки"
date = "2021-05-27T09:15:00+03:00"
tags = [
    "техническое",
    "наблюдения",
    "apple",
    "OS X",
    "airtag"
]
ghcommentid = 3
+++


Спустя две недели использования альтернативной прошивки для nRF5x, работающей в сети Apple, хочу поделиться опытом.

Я остановился на версии [acalatrava/openhaystack-firmware](https://github.com/acalatrava/openhaystack-firmware), которая имеет меньшее энергопотребление. Сама прошивка залита в метку, которая находится в герметичном корпусе и висит на ошейнике собаки.

{{< post-image src="/images/airtag-map.png" width="600px" alt="Изображение позиции точек на карте">}}

У работы метки есть особенности, такие как:

<!--more-->

1. Дальность работы, указана до 100 метров, по ощущениям это реально так. Хорошие показатели, но плюс может оказаться и минусом, т.к. сигнал порой ловится устройствами в проезжающих автомобилях и эти устройства отправляют информацию в Apple не сразу, таким образом, информация о местоположении порой может сильно отличаться от реального места трекера. И устройства отправляют именно своё местоположения, т.к. не знают где на самом деле находится трекер.
2. Периодичность, с которой Apple принимает данные. Сам трекер в текущей прошивке отправляет данные каждые 5 секунд, но серверы Apple обрабатывают запросы не чаще чем раз в 5 минут. И эта особенность вкупе с предыдущим пунктом может вносить некоторый шум в данные (бывает что геопозиция записывается метрах в 500 от реальной точки).
3. Данные о местоположении трекера доступны только в приложении [openhaystack](https://github.com/seemoo-lab/openhaystack/releases) и пока оно есть только под mac os (а также требует вмешательства в работу Apple Mail).
4. Мне не удалось заставить работать одновременно больше одной метки.
5. Количество устройств, способных передавать ваши данные о метке реально огромное, метка находящаяся в автомобиле на парковке стабильно раз в 5 минут передаёт информацию о своём положении.


[Любопытный проект](https://github.com/positive-security/send-my), как через сеть AirTag передавать сообщения

